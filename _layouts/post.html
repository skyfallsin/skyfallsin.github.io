---
layout: default
---
<div class="post-layout">
  <nav class="toc" id="toc"></nav>
  <article>
    <h1><a href="/">←</a> {{ page.title }}</h1>
    <p class="post-date">{{ page.date | date: "%Y-%m-%d" }}</p>
    {{ content }}
    
    <nav class="post-nav">
      {% if page.previous.url and page.previous.published != false %}
        <a href="{{ page.previous.url }}" class="prev">← {{ page.previous.title }}</a>
      {% endif %}
      {% if page.next.url and page.next.published != false %}
        <a href="{{ page.next.url }}" class="next">{{ page.next.title }} →</a>
      {% endif %}
    </nav>
  </article>
</div>
<script>
(function() {
  const headings = document.querySelectorAll('article h1:not(:first-of-type), article h2, article h3');
  const toc = document.getElementById('toc');
  if (headings.length < 2) { toc.style.display = 'none'; return; }
  
  const ul = document.createElement('ul');
  let currentH2Details = null;
  let currentH2Ul = null;
  
  headings.forEach((h, i) => {
    if (!h.id) h.id = 'section-' + i;
    
    if (h.tagName === 'H1' || h.tagName === 'H2') {
      const details = document.createElement('details');
      details.className = h.tagName.toLowerCase() + '-section no-children';
      const summary = document.createElement('summary');
      const a = document.createElement('a');
      a.href = '#' + h.id;
      a.textContent = h.textContent;
      summary.appendChild(a);
      details.appendChild(summary);
      currentH2Ul = document.createElement('ul');
      details.appendChild(currentH2Ul);
      ul.appendChild(details);
      currentH2Details = details;
    } else if (h.tagName === 'H3') {
      const li = document.createElement('li');
      li.className = 'h3';
      const a = document.createElement('a');
      a.href = '#' + h.id;
      a.textContent = h.textContent;
      li.appendChild(a);
      if (currentH2Ul) {
        currentH2Details.classList.remove('no-children');
        currentH2Ul.appendChild(li);
      } else {
        ul.appendChild(li);
      }
    }
  });
  toc.appendChild(ul);
})();
</script>
